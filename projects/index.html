<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <base href="/" />
  <title>Projects — Rat Watch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Toilet Bowl Race, Mayor’s Parade, Tall Bikes, Jousting." />
  <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
:root{
  --pad: clamp(16px,4vw,40px);
  --bg:#0f1013; --fg:#e9ebef; --muted:#a1a7af; --outline:#2a2b31; --badge:#2c3037cc;
  --gap: 8px;          /* tighter spacing */
  --row: 6px;          /* finer vertical grid for smoother fit (match JS rowH) */
  --tile-min: clamp(320px, 38vw, 460px);  /* bigger cards */
}

*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui}
header,main{padding:24px var(--pad)}

h1{font-family:"Bebas Neue"; font-size:clamp(36px,8vw,72px); letter-spacing:.5px; margin:.2rem 0}
nav a{color:var(--fg); text-decoration:none; margin-right:10px; border:1px solid var(--outline); border-radius:999px; padding:.45rem .85rem; background:#17181c}
nav a:hover{background:#20222a}

.tabs{display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 18px}
.tab{padding:.5rem .85rem; border:1px solid var(--outline); border-radius:999px; background:#17181c; cursor:pointer}
.tab[aria-selected="true"]{background:#20222a}

/* Masonry grid: bigger cards + tighter gaps */
.masonry{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(var(--tile-min), 1fr));
  grid-auto-rows:var(--row);
  gap:var(--gap);
  align-items:start;
}

/* Tighter collage look: remove heavy borders and extra spacing */
.tile{
  position:relative;
  background:#15161b;
  border:0;                     /* no border = tighter feel */
  border-radius:10px;
  overflow:hidden;
  line-height:0;                /* kills stray inline gaps around images */
}

/* Images fill tiles cleanly */
.tile img{
  display:block;
  width:100%;
  height:auto;                  /* preserve aspect ratio */
  object-fit:cover;
  transform:translateZ(0);      /* crisper scaling on some GPUs */
}

/* Smaller, unobtrusive labels */
.banner{
  position:absolute; left:8px; top:8px;
  background:var(--badge);
  color:#fff; padding:.32rem .5rem;
  border-radius:8px; font-weight:700;
  font-size:.85rem; line-height:1;
}

/* Responsive: make tiles even larger on wide screens */
@media (min-width: 1200px){
  :root{ --tile-min: clamp(360px, 32vw, 520px); }
}

/* Optional hover micro-zoom for collage vibe (keeps layout tight) */
.tile:hover img{
  transform: scale(1.015);
  transition: transform .25s ease;
}

  </style>
</head>
<body>
  <header>
    <h1>Projects</h1>
    <nav>
      <a href="/">Home</a>
      <a href="/members/">Members</a>
      <a href="/mission/">Mission</a>
      <a href="/get_involved/">Get Involved</a>
      <a href="/contact/">Contact</a>
    </nav>
  </header>

  <main>
    <div class="tabs" role="tablist" aria-label="Project categories">
      <button class="tab" role="tab" aria-selected="true" data-cat="toilet">Toilet Bowl Race</button>
      <button class="tab" role="tab" aria-selected="false" data-cat="mayor">Mayor’s Parade 2025</button>
      <button class="tab" role="tab" aria-selected="false" data-cat="tall">Tall Bikes</button>
      <button class="tab" role="tab" aria-selected="false" data-cat="joust">Jousting</button>
      <button class="tab" role="tab" aria-selected="false" data-cat="builds">Builds</button>
      <button class="tab" role="tab" aria-selected="false" data-cat="rides">Rides</button>
    </div>
    <section id="grid" class="masonry" aria-live="polite"></section>
  </main>

  <script>
  // One folder per category
  const sets = {
    toilet: {
      base: "/images/projects/toilet_bowl/",
      items: [
        {file:"taj_toilet.jpg", label:""},
        {file:"taj_toilet_2.jpg", label:""},
        {file:"taj_toilet_push.jpg", label:""},
        {file:"toilet_group.jpg", label:""},
        {file:"toilet_push_2.jpg", label:""},
      ]
    },
    mayor: {
      base: "/images/projects/mayors_parade/",   // update as needed
      items: [
        // {file:"...", label:""},
      ]
    },
    tall: {
      base: "/images/projects/tall_bikes/",
      items: [
        {file:"brayden_bike_repair.jpg",  label:"Bicycle Repair Station"},
        {file:"brayden_flying.jpg",     label:"Brayden flying"},
        {file:"group_tall.jpg",  label:"Bike Party"},
        {file:"tall_bike_cluster.jpg",  label:""},
        {file:"ratwatch_spray.jpg",  label:"Spray logo"}

      ]
    },
    joust: {
      base: "/images/projects/joust/",   // update as needed
      items: [
        // {file:"...", label:""},
      ]
    },
  };

  const grid = document.getElementById('grid');
  const rowH = 6, gap = 8;

  function resolveSrc(base, file) {
    // If file is absolute (starts with / or http), use it; otherwise prefix with base
    return (/^(\/|https?:)/.test(file)) ? file : (base + file);
  }

  function spanFor(el) {
    const h = el.getBoundingClientRect().height;
    return `span ${Math.ceil((h + gap) / rowH)}`;
  }

  function render(cat) {
    grid.innerHTML = "";
    const cfg = sets[cat] || {};
    const base = cfg.base || "/";
    const arr = cfg.items || [];

    arr.forEach(it => {
      const t = document.createElement('article');
      t.className = 'tile';

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.decoding = 'async';
      img.src = resolveSrc(base, it.file);
      img.alt = it.label || "";

      const b = document.createElement('div');
      b.className = 'banner';
      b.textContent = it.label || "";

      t.append(img, b);
      grid.appendChild(t);

      // Set row span after image loads (and on error, so layout doesn't hang)
      const setSpan = () => { t.style.gridRowEnd = spanFor(t); };
      img.addEventListener('load', setSpan, { once: true });
      img.addEventListener('error', () => {
        // Optional: mark broken images, still span to avoid gaps
        t.classList.add('img-error');
        setSpan();
      }, { once: true });
    });
  }

  // Tabs: switch category + selection state
  document.querySelectorAll('.tab').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(b => b.setAttribute('aria-selected', 'false'));
      btn.setAttribute('aria-selected', 'true');
      render(btn.dataset.cat);
    });
  });

  // Initial render
  render('tall'); // default category

  // Reflow spans on resize
  window.addEventListener('resize', () => {
    document.querySelectorAll('.masonry .tile').forEach(t => {
      t.style.gridRowEnd = spanFor(t);
    });
  });
</script>

</body>
</html>
